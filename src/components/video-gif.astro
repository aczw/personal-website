---
import type { CollectionEntry } from "astro:content";
import type { ContentCollectionKey } from "astro:content";

// See https://web.dev/patterns/web-vitals-patterns/video/video-gif

interface Props {
  content: {
    collection: ContentCollectionKey;
    folder: CollectionEntry<ContentCollectionKey>["slug"];
  };
  name: string;
  useWebM?: boolean;
}

const {
  content: { collection, folder },
  name,
  useWebM,
} = Astro.props;

const path = `/_files/${collection}/${folder}/${name}`;
---

<video autoplay loop muted playsinline class="h-full w-full animate-fade bg-sweater-9 [--order:0]">
  {useWebM ? <source src={`${path}.webm`} type="video/webm" /> : null}
  <source src={`${path}.mp4`} type="video/mp4" />
</video>
