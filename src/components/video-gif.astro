---
/**
 * @see https://web.dev/patterns/web-vitals-patterns/video/video-gif
 */

import type { CollectionEntry, ContentCollectionKey } from "astro:content";

import { CDN_URL } from "@/scripts/constants";

interface Props {
  content: {
    collection: ContentCollectionKey;
    folder: CollectionEntry<ContentCollectionKey>["id"];
  };
  name: string;
  hasWebM?: boolean;
}

const {
  content: { collection, folder },
  name,
  hasWebM,
} = Astro.props;

const path = `${CDN_URL}/${collection}/${folder}`;
---

<video autoplay loop muted playsinline>
  {hasWebM ? <source src={`${path}/${name}.webm`} type="video/webm" /> : null}
  <source src={`${path}/${name}.mp4`} type="video/mp4" />
</video>
