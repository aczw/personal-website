---
import api from "@/utils/api";

interface LastFmProfile {
  user: {
    name: string;
    age: string;
    subscriber: string;
    realname: string;
    bootstrap: string;
    playcount: string;
    artist_count: string;
    playlists: string;
    track_count: string;
    album_count: string;
    image: {
      size: "small" | "medium" | "large" | "extralarge";
      "#text": string;
    }[];
    registered: {
      unixtime: string;
      "#text": number;
    };
    country: string;
    gender: string;
    url: string;
    type: string;
  };
}

const { user: profile } = await api<LastFmProfile>(
  `http://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=ashzw&api_key=${
    import.meta.env.LASTFM_API_KEY
  }&format=json`,
);
---

<h4 class="w-fit font-bold text-sweater-2">
  <a
    href={profile.url}
    target="_blank"
    class="transition-colors hover:text-sweater-1 hover:underline"
    >My Last.fm profile</a
  >
</h4>
<p>
  I like tracking the music I listen to. I currently have <span
    class="text-sweater-3">{profile.playcount}</span
  >
   total scrobbles across <span class="text-sweater-3"
    >{profile.track_count}</span
  > songs.
</p>
