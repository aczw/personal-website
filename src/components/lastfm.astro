---
import { GET, type Track } from "@/pages/api/lastfm";
import { Music } from "lucide-astro";

const response = await GET(Astro);
const track = (await response.json()) as Track;
---

<div class="w-1/2 animate-fade [--order:0]">
  <p class="text-sweater-7">{track.live ? "currently playing" : "last listened to"}</p>
  <span class="group flex items-center text-sweater-6 hover:text-sweater-5">
    <Music
      size={15}
      class="mr-1.5 transition-colors"
    />
    <a
      href={track.url}
      target="_blank"
      class="truncate underline decoration-sweater-9 decoration-1 underline-offset-2 transition-colors group-hover:decoration-sweater-7"
      >{track.song} â€” {track.artist}</a
    >
  </span>
</div>
